<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Access Management</title>
    <style>
        /*  Action Buttons */
        .floating-actions {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
        }
        /*  Permissions Coloring  */
        .role-admin { background-color: #3b82f6; /* Blue-500 */ }
        .role-edit { background-color: #06b6d4; /* Cyan-500 */ }
        .role-read { background-color: #f59e0b; /* Amber-500 */ }
    </style>
</head>
<body class="h-full bg-gray-100">
    <main class="pt-16">
    <div class="flex h-[calc(100vh-64px)] p-6 space-x-6">
        
        <div class="w-1/3 bg-white p-4 rounded-xl shadow-lg flex flex-col">
            <h2 class="text-xl font-bold mb-4 text-gray-800">Applications</h2>
            
            <div class="mb-4">
                <input type="text" id="appSearchInput" placeholder="Search by owner or app name" 
                       class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" 
                       oninput="filterApplications()" />
            </div>

            <div id="applicationsList" class="space-y-3 overflow-y-auto pr-2 flex-grow">
                <div class="text-center py-10 text-gray-500">Loding...</div>
            </div>
        </div>

        <div class="w-2/3 bg-white p-4 rounded-xl shadow-lg flex flex-col relative" id="usersPanel">
            
            <h2 class="text-xl font-bold mb-4 text-gray-800" id="usersPanelTitle">
                Users' access permission of : <span class="font-extrabold text-blue-600" id="selectedAppName">--There is no selected app--</span>
            </h2>

            <div class="mb-4" id="userSearchContainer" style="display: none;">
                <input type="text" id="userSearchInput" placeholder="Search by user name or email" 
                       class="w-full p-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" 
                       oninput="filterUsers()" />
            </div>

            <div id="usersList" class="space-y-3 overflow-y-auto pr-2 flex-grow">
                <div class="text-center py-20 text-gray-500">‚ö†Ô∏è Please select an application from the left-hand menu to view and manage user permissions</div>
            </div>

            <div class="floating-actions bg-white p-4 rounded-t-xl shadow-2xl border-t border-gray-200 space-x-4" id="floatingActions" style="display: none;">
                <button onclick="cancelChanges()" class="bg-red-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-red-600 transition duration-150">
                    ‚ùå Cancel changes
                </button>
                <button onclick="savePermissions()" class="bg-green-600 text-white font-semibold py-2 px-6 rounded-lg hover:bg-green-700 transition duration-150">
                    üíæ Save permissions
                </button>
            </div>
        </div>
    </div>
    </main>

    <script src="../static/js/navbar.js"></script>
    <script type="module" src="/static/js/access-page.js"></script>
</body>
</html>